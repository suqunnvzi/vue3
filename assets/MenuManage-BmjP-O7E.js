import{I as c,d as z,r as y,a as A,D as B,g as i,o as D,c as N,b as e,w as t,j as u,v as O,h as d,m as E,J as V,F,K as C}from"./index-r54z97pg.js";const R=()=>c.get("/admin/acl/permission"),T=m=>m.id?c.put("/admin/acl/permission/update",m):c.post("/admin/acl/permission/save",m),H=m=>c.delete("/admin/acl/permission/remove/"+m),I={class:"dialog-footer"},K=z({name:"MenuManage",__name:"MenuManage",setup(m){let _=y([]),n=y(!1),a=A({code:"",level:0,name:"",pid:0});B(()=>{f()});const f=async()=>{let o=await R();o.code==200&&(_.value=o.data)},k=o=>{Object.assign(a,{id:0,code:"",level:0,name:"",pid:0}),n.value=!0,a.level=o.level+1,a.pid=o.id},M=o=>{n.value=!0,Object.assign(a,o)},x=async()=>{(await T(a)).code==200&&(n.value=!1,C.success(a.id?"更新成功":"添加成功"),f())},P=async o=>{(await H(o)).code==200&&(C.success("删除成功"),f())};return(o,s)=>{const p=i("el-table-column"),r=i("el-button"),q=i("el-popconfirm"),U=i("el-table"),v=i("el-input"),b=i("el-form-item"),$=i("el-form"),j=i("el-dialog");return D(),N(F,null,[e(U,{data:d(_),style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:""},{default:t(()=>[e(p,{label:"名称",prop:"name"}),e(p,{label:"权限值",prop:"code"}),e(p,{label:"修改时间",prop:"updateTime"}),e(p,{label:"操作"},{default:t(({row:l})=>[e(r,{type:"primary",onClick:g=>k(l),size:"small",disabled:l.level==4},{default:t(()=>[u(O(l.level==3?"添加功能":"添加菜单"),1)]),_:2},1032,["onClick","disabled"]),e(r,{type:"primary",onClick:g=>M(l),size:"small",disabled:l.level==1},{default:t(()=>[u("编辑")]),_:2},1032,["onClick","disabled"]),e(q,{title:`你确定要删除${l.name}?`,width:"260px",onConfirm:g=>P(l.id)},{reference:t(()=>[e(r,{type:"primary",size:"small",disabled:l.level==1},{default:t(()=>[u("删除")]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(j,{modelValue:d(n),"onUpdate:modelValue":s[3]||(s[3]=l=>V(n)?n.value=l:n=l),title:d(a).id?"更新菜单":"添加菜单"},{footer:t(()=>[E("span",I,[e(r,{onClick:s[2]||(s[2]=l=>V(n)?n.value=!1:n=!1)},{default:t(()=>[u("取消")]),_:1}),e(r,{type:"primary",onClick:x},{default:t(()=>[u(" 确定 ")]),_:1})])]),default:t(()=>[e($,null,{default:t(()=>[e(b,{label:"名称"},{default:t(()=>[e(v,{placeholder:"请你输入菜单名称",modelValue:d(a).name,"onUpdate:modelValue":s[0]||(s[0]=l=>d(a).name=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"权限"},{default:t(()=>[e(v,{placeholder:"请你输入权限数值",modelValue:d(a).code,"onUpdate:modelValue":s[1]||(s[1]=l=>d(a).code=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{K as default};
