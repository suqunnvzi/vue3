import{I as g,d as H,r as u,D as I,g as r,o as b,c as T,b as a,w as t,j as k,m as N,v as K,n as F,F as J,K as i,_ as Q}from"./index-r54z97pg.js";const W=(d,m)=>g.get(`/admin/product/baseTrademark/${d}/${m}`),X=d=>d.id?g.put("/admin/product/baseTrademark/update",d):g.post("/admin/product/baseTrademark/save",d),Y=d=>g.delete("/admin/product/baseTrademark/remove/"+d),Z=["src"],ee=["src"],ae=H({name:"TrademarkManage",__name:"TrademarkManage",setup(d){const m=u(1),v=u(5),y=u(0),U=u([]),c=u(!1),n=u({tmName:"",logoUrl:""}),_=async()=>{const e=await W(m.value,v.value);e.code===200&&(y.value=e.data.total,U.value=e.data.records)};I(()=>{_()});const V=()=>{var e;n.value={tmName:"",logoUrl:""},(e=p.value)==null||e.clearValidate(),c.value=!0},x=e=>{var l;(l=p.value)==null||l.clearValidate(),c.value=!0,Object.assign(n.value,e)},C=()=>{c.value=!1},z=async()=>{await p.value.validate(),(await X(n.value)).code===200?(c.value=!1,i.success(n.value.id?"修改品牌成功":"添加品牌成功"),_()):i.error(n.value.id?"修改品牌失败":"添加品牌失败")},O=e=>e.type!=="image/png"&&e.type!=="image/jpeg"&&e.type!=="image/gif"?(i.error("上传的图片必须是图片格式"),!1):e.size/1024/1024>4?(i.error("上传的图片大小不能超过4M"),!1):!0,h=(e,l)=>{console.log(e),n.value.logoUrl=URL.createObjectURL(l.raw),p.value.clearValidate("logoUrl")},p=u(),L={tmName:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{validator:(e,l,s)=>{console.log(e),l.trim().length>=2?s():s(new Error("品牌名称长度位数大于等于两位"))}}],logoUrl:[{validator:(e,l,s)=>{console.log(e),l.trim().length>0?s():s(new Error("请上传品牌LOGO"))}}]},M=async e=>{(await Y(e)).code===200?(i.success("删除品牌成功"),_()):i.error("删除品牌失败")};return(e,l)=>{const s=r("el-button"),f=r("el-table-column"),P=r("el-popconfirm"),j=r("el-table"),q=r("el-pagination"),E=r("el-card"),$=r("el-input"),w=r("el-form-item"),B=r("Plus"),D=r("el-icon"),R=r("el-upload"),S=r("el-form"),A=r("el-dialog");return b(),T(J,null,[a(E,null,{default:t(()=>[a(s,{type:"primary",size:"default",icon:"Plus",onClick:V},{default:t(()=>[k("添加品牌")]),_:1}),a(j,{style:{margin:"10px 0"},border:"",data:U.value},{default:t(()=>[a(f,{label:"序号",width:"80px",align:"center",type:"index"}),a(f,{label:"品牌名称"},{default:t(o=>[N("pre",null,K(o.row.tmName),1)]),_:1}),a(f,{label:"品牌LOGO"},{default:t(o=>[N("img",{src:o.row.logoUrl,alt:"无logo",style:{width:"100px"}},null,8,Z)]),_:1}),a(f,{label:"品牌操作"},{default:t(o=>[a(s,{type:"primary",size:"small",icon:"Edit",onClick:G=>x(o.row)},null,8,["onClick"]),a(P,{width:"250px",title:`你确认要删除${o.row.tmName}吗？`,onConfirm:G=>M(o.row.id)},{reference:t(()=>[a(s,{type:"danger",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),a(q,{"current-page":m.value,"onUpdate:currentPage":l[0]||(l[0]=o=>m.value=o),"page-size":v.value,"onUpdate:pageSize":l[1]||(l[1]=o=>v.value=o),"page-sizes":[3,5,7,9],background:"true",layout:"prev, pager, next, jumper,->,total, sizes",total:y.value,onChange:_},null,8,["current-page","page-size","total"])]),_:1}),a(A,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=o=>c.value=o),title:n.value.id?"修改品牌":"添加品牌",width:"500"},{footer:t(()=>[a(s,{onClick:C},{default:t(()=>[k("取消")]),_:1}),a(s,{type:"primary",onClick:z},{default:t(()=>[k(" 确定 ")]),_:1})]),default:t(()=>[a(S,{"label-width":"100px","label-position":"left",model:n.value,rules:L,ref_key:"formRef",ref:p},{default:t(()=>[a(w,{label:"品牌名称",style:{width:"80%"},prop:"tmName"},{default:t(()=>[a($,{placeholder:"请输入品牌名称",modelValue:n.value.tmName,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value.tmName=o)},null,8,["modelValue"])]),_:1}),a(w,{label:"品牌LOGO",prop:"logoUrl"},{default:t(()=>[a(R,{class:"avatar-uploader",action:"/api/admin/product/fileUpload","show-file-list":!1,"on-success":h,"before-upload":O},{default:t(()=>[n.value.logoUrl?(b(),T("img",{key:0,src:n.value.logoUrl,class:"avatar"},null,8,ee)):(b(),F(D,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[a(B)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}}),re=Q(ae,[["__scopeId","data-v-ab235384"]]);export{re as default};
